.. _category_comparison_tutorial:

=====================================
Comparing Sample Variable Categories
=====================================

Introduction
------------

This tutorial explains the use of several different mapping file category comparison techniques that are available in `compare_categories.py <../scripts/compare_categories.html>`_. A majority of the currently available comparison techniques are based on the ANOVA family of statistics, which is a statistical method, wherein observed variance in a particular variable is partitioned into components attributable to different sources of variation.

One common request when working with sample data is the ability to analyze the data sets with available statistical methods in the field. `compare_categories.py <../scripts/compare_categories.html>`_ provides this functionality. This tutorial will demonstrate how to work with this script in order to anaylze your data sets that have been produced through QIIME's workflow processing.

Input Files
-----------

Two data sets have been provided in order to demonstrate the proper use of this script. The information from these data sets were generated from QIIMEs OTU picking script(pick_otus_through_otu_table.py[ADD LINK HERE]). The first set is colloquially known as '88_soils', and the second is known as 'keyboard'.

The '88_Soils' files used in this tutorial can be found here[ADD THE LINK HERE].

The files are taken from a study (Lauber et al., 2009) where 88 soil samples were collected at various regions around the world. pH was recorded for each of the soil samples. Using distance_matrix_from_mapping.py, we created a distance matrix containing differences in pH between each pair of samples. Throughout this tutorial, we will explore various ways of comparing these matrices for correlation.

The 'keyboard' files used in this tutorial can be found here[ADD THE LINK HERE].

The files are taken from the (Fierier Keyboard study title goes here) study (Fiere citation goes here). In this study they sampled the microbial communities of people who used the same keyboard. Then they sampled the keyboard that the users shared, and identified that microbial communities would actually cluster around their respective hosts when processed. Thus, this provides a tenative application for forensics.


Output Files
------------

Depending on which statistical method you run, the output file(s) generated by this script will vary. They will all be placed in the directory specified by the required -o option. Most of the output files will be tab-separated text files containing information about the test that was performed and its results. These can easily be viewed in a spreadsheet program such as Microsoft Office: Excel.

Pre-configuration
-----------------

In order to guarantee that your output is consistent with what is demonstrated in this tutorial you should download the two data sets above. Then extract the contents to their default locations. All commands will be typed as though you are working in the directory that contains these extracted data sets.

Below is an image that demonstrates the basic envrionment with a tutorial directory that was created to house the two data sets.

[DEFAULT BLANK ENVIRONMENT IMAGE GOES HERE]

To extract the contents of these .zip files type the commands:

'unzip 88_soils.zip'
'unzip keyboard.zip'

Below is an image that demonstrates how to extract the contents, and then displays the resulting two directories that are extracted from that process. 

[DEFAULT UNZIPPED ENVIRONMENT IMAGES GOES HERE]

After that if you feel confident in removing the .zip files that remain go ahead and do so. The below image demonstrates that process. The commands to do so are:

'rm 88_soils.zip'
'rm keyboard.zip'

[DEFAULT DELETED ZIP ENVIRONMENT IMAGE GOES HERE] 

Adonis
------

Adonis takes a set of sample data provided, and based on the metada information you can determine how related the categorical data is between the other samples. IE is there a relationship between the gender of the samples that were taken, or possibly the pH value of the samples that were taken.

To demonstrate this process we will use the keyboard data set found above. 

[COMMAND GOES HERE]

Anosim
------

BEST
----

Discriminant Function Analysis (DFA)
------------------------------------

Moran's I
---------

Multiple Response Permutation Procedure (MRPP)
----------------------------------------------

RDA
---

References
----------
Fierer, N. et al. Forensic identification using skin bacterial communities. Proc. Natl. Acad. Sci. USA. 107: 6477-6481 (2010).


Pyrosequencing-based assessment of soil pH as a predictor of soil bacterial community structure at the continental scale.  Lauber CL, Hamady M, Knight R, Fierer N.  Appl Environ Microbiol. 2009 Aug;75(15):5111-20.


Jari Oksanen, F. Guillaume Blanchet, Roeland Kindt, Pierre Legendre, Peter R. Minchin, R. B. O'Hara, Gavin L. Simpson, Peter Solymos, M.  Henry H. Stevens and Helene Wagner (2011). vegan: Community Ecology Package. R package version 2.0-2. http://CRAN.R-project.org/package=vegan


Tutorial 88_Soils Download

https://s3.amazonaws.com/s3-qiime_tutorial_files/88_soils.zip

Tutorial keyboard Download

https://s3.amazonaws.com/s3-qiime_tutorial_files/keyboard.zip

